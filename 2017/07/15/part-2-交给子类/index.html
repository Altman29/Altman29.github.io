<!doctype html>



  

<html class="theme-next mist use-motion">

<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Template Method模式,Factory Method模式," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="行歌，在草长莺飞的季节里喃喃低唱
到处人潮汹涌还会孤独
怎么，在灯火阑珊处竟然会觉得荒芜
从前轻狂绕过时光
这次学习的是Template Method 模式和Factory Method 模式。">
<meta property="og:type" content="article">
<meta property="og:title" content="part 2 - 交给子类[Template & Factory]">
<meta property="og:url" content="http://yoursite.com/2017/07/15/part-2-交给子类/index.html">
<meta property="og:site_name" content="拾叁妖">
<meta property="og:description" content="行歌，在草长莺飞的季节里喃喃低唱
到处人潮汹涌还会孤独
怎么，在灯火阑珊处竟然会觉得荒芜
从前轻狂绕过时光
这次学习的是Template Method 模式和Factory Method 模式。">
<meta property="og:image" content="http://ogo6z0ylk.bkt.clouddn.com/pic1.png">
<meta property="og:image" content="http://ogo6z0ylk.bkt.clouddn.com/pic2.png">
<meta property="og:image" content="http://ogo6z0ylk.bkt.clouddn.com/pic3.png">
<meta property="og:image" content="http://ogo6z0ylk.bkt.clouddn.com/pic4.png">
<meta property="og:image" content="http://ogo6z0ylk.bkt.clouddn.com/pic5.png">
<meta property="og:image" content="http://ogo6z0ylk.bkt.clouddn.com/121501.png">
<meta property="og:image" content="http://ogo6z0ylk.bkt.clouddn.com/121502.png">
<meta property="og:image" content="http://ogo6z0ylk.bkt.clouddn.com/121503.png">
<meta property="og:updated_time" content="2018-05-09T02:01:13.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="part 2 - 交给子类[Template & Factory]">
<meta name="twitter:description" content="行歌，在草长莺飞的季节里喃喃低唱
到处人潮汹涌还会孤独
怎么，在灯火阑珊处竟然会觉得荒芜
从前轻狂绕过时光
这次学习的是Template Method 模式和Factory Method 模式。">
<meta name="twitter:image" content="http://ogo6z0ylk.bkt.clouddn.com/pic1.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: undefined,
      author: '博主'
    }
  };
</script>

  <title> part 2 - 交给子类[Template & Factory] | 拾叁妖 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">拾叁妖</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">。</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                part 2 - 交给子类[Template & Factory]
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-07-15T08:02:36+08:00" content="2017-07-15">
              2017-07-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Design-Patterns/" itemprop="url" rel="index">
                    <span itemprop="name">Design Patterns</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          
          
          
             <span id="/2017/07/15/part-2-交给子类/" class="leancloud_visitors" data-flag-title="part 2 - 交给子类[Template & Factory]">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>行歌，在草长莺飞的季节里喃喃低唱</p>
<p>到处人潮汹涌还会孤独</p>
<p>怎么，在灯火阑珊处竟然会觉得荒芜</p>
<p>从前轻狂绕过时光</p>
<p>这次学习的是Template Method 模式和Factory Method 模式。</p>
<a id="more"></a>
<hr>
<hr>
<p><b><i>Template Method 模式:将具体处理交给子类;</i></b></p>
<h2 id="Template-Method-模式"><a href="#Template-Method-模式" class="headerlink" title="Template Method 模式"></a>Template Method 模式</h2><p>什么是模板</p>
<p>模板的原意是指带有镂空文字的薄薄的塑料板。只要用笔在模板的镂空处进行临摹，即使是手写也能写出整齐的文字。不管用什么笔来写，文字的形状都会与模板上镂空处形状保持一致。</p>
<p>什么是Template Method 模式</p>
<p>Template Method </p>
<p>模式是带有模板功能的模式，组成模板的方法被定义在父类中。由于这些方法是抽象方法，所以只查看父类的代码是无法得知这些方法最终会进行何种具体处理的，唯一能知道的就是父类如何调用这些方法的。</p>
<p>实现上述这些抽象方法的是子类。在子类中实现了抽象方法也就决定了具体的处理。也就是说，只要在不同的子类中实现不同的具体处理，当父类的模板方法被调用时程序行为也会不同。但是，不论子类中的具体实现如何，处理的流程都会按照父类中所定义的那样进行。</p>
<p>像这样，<b>在父类中定义处理流程的框架，在子类中实现具体处理的模式就称为Template Method 模式</b>。</p>
<h3 id="示例程序"><a href="#示例程序" class="headerlink" title="示例程序"></a>示例程序</h3><p>这里的示例程序是一段将字符和字符串循环显示5次的简单程序。在示例程序中会出现AbstractDisplay、CharDisplay、StringDisplay、Main这4个类。在AbstractDisplay类中定义了display()方法，而且在该方法中依次调用了open()、print()、close()这3个方法。虽然这3个方法已经在AbstractDisplay中被声明了，但都是没有实体的抽象方法。<b>这里，调用抽象方法的display()方法就是模板方法。</b></p>
<p>而实际上实现了open()、print()、close()这3个抽象方法的是AbstractDisplay的子类CharDisplay类和StirngDisplay类。</p>
<h4 id="类的一览表"><a href="#类的一览表" class="headerlink" title="类的一览表"></a>类的一览表</h4><p><img src="http://ogo6z0ylk.bkt.clouddn.com/pic1.png" alt=""></p>
<h4 id="示例程序的类图"><a href="#示例程序的类图" class="headerlink" title="示例程序的类图"></a>示例程序的类图</h4><p><img src="http://ogo6z0ylk.bkt.clouddn.com/pic2.png" alt=""></p>
<h4 id="AbstractDisplay-类"><a href="#AbstractDisplay-类" class="headerlink" title="AbstractDisplay 类"></a>AbstractDisplay 类</h4><p>AbstractDisplay类有4个方法，其中只有display()方法实现了，open()、print()、close()都是抽象方法、通过查看AbstractDisplay类中的display()方法的代码，可以得知display()方法进行以下处理。</p>
<p>a.调用了open()方法; b.调用了5次print()方法; c.调用close()方法;</p>
<p>而因为open()、print()、close()都是抽象方法，仅仅查看AbstractDisplay类的代码无法得知到底进行了怎样的处理。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractDisplay</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">open</span><span class="params">()</span></span>;	<span class="comment">//交给子类</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;	<span class="comment">//交给子类</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span></span>;	<span class="comment">//交给子类</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>&#123;	<span class="comment">//规定代码行为</span></div><div class="line">		open();</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</div><div class="line">			print();</div><div class="line">		&#125;</div><div class="line">		close();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="CharDisplay-类"><a href="#CharDisplay-类" class="headerlink" title="CharDisplay 类"></a>CharDisplay 类</h4><p>CharDisplay类实现了父类AbstractDisplay类的3个抽象方法，open()、print()、close()。具体处理如下。</p>
<p><img src="http://ogo6z0ylk.bkt.clouddn.com/pic3.png" alt=""></p>
<p>假设向CharDisplay的构造函数传递的参数是H这个字符，那么最终显示会是如下结果。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;&lt;HHHHH&gt;&gt;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CharDisplay</span> <span class="keyword">extends</span> <span class="title">AbstractDisplay</span></span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">char</span> ch;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">CharDisplay</span><span class="params">(CHar ch)</span></span>&#123;</div><div class="line">		<span class="keyword">this</span>.ch = ch;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open</span><span class="params">()</span></span>&#123;</div><div class="line">		System.out.print(<span class="string">"&lt;&lt;"</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</div><div class="line">		System.out.print(ch);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span></span>&#123;</div><div class="line">		System.out.print(<span class="string">"&gt;&gt;"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="StringDisplay-类"><a href="#StringDisplay-类" class="headerlink" title="StringDisplay 类"></a>StringDisplay 类</h4><p>与CharDisplay类一样，它也实现了open()、print()、close()方法。具体处理如下。</p>
<p><img src="http://ogo6z0ylk.bkt.clouddn.com/pic4.png" alt=""></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StirngDisplay</span> <span class="keyword">extends</span> <span class="title">AbstractDisplay</span></span>&#123;</div><div class="line">	<span class="keyword">private</span> String string;</div><div class="line">	pirvate <span class="keyword">int</span> width;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">StirngDisplay</span><span class="params">(String string)</span></span>&#123;</div><div class="line">		<span class="keyword">this</span>.string = string;</div><div class="line">		<span class="keyword">this</span>.width = string.getBytes().length;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open</span><span class="params">()</span></span>&#123;</div><div class="line">		printLine();</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</div><div class="line">		System.out.print(<span class="string">"|"</span>+string+<span class="string">"|"</span>):</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span></span>&#123;</div><div class="line">		printLine();</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printLine</span><span class="params">()</span></span>&#123;</div><div class="line">		System.out.print(<span class="string">"+"</span>);</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt; width ;i++)&#123;</div><div class="line">			System.out.print(<span class="string">"-"</span>);</div><div class="line">		&#125;</div><div class="line">		System.out.print(<span class="string">"+"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>此时，如果display()方法被调用，假设向StringDisplay的构造函数中传递的参数是”Hello,world.”，结果会如下所示。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">+-------------+</div><div class="line">|Hello, world.|</div><div class="line">|Hello, world.|</div><div class="line">|Hello, world.|</div><div class="line">|Hello, world.|</div><div class="line">|Hello, world.|</div><div class="line">+-------------+</div></pre></td></tr></table></figure>
<h4 id="Main-类"><a href="#Main-类" class="headerlink" title="Main 类"></a>Main 类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">		<span class="comment">//生成一个持有'H'的CharDisplay类的实例</span></div><div class="line">		AbstractDisplay d1 = <span class="keyword">new</span> CharDisplay(<span class="string">'H'</span>);</div><div class="line">		<span class="comment">//生成一个持有"Hello, world."的StringDisplay类的实例</span></div><div class="line">		AbstractDisplay d2 = <span class="keyword">new</span> StringDisplay(<span class="string">"Hello, world."</span>);</div><div class="line">		<span class="comment">//生成一个持有"你好，世界"的StringDisplay类的实例</span></div><div class="line">		AbstractDisplay d3 = <span class="keyword">new</span> StirngDisplay(<span class="string">"你好，世界"</span>);</div><div class="line">		<span class="comment">//时机的程序行为取决于CharDisplay类和StringDisplay类的具体实现.</span></div><div class="line">		d1.display();</div><div class="line">		d2.display();</div><div class="line">		d3.display();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行结果如下</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;&lt;HHHHH&gt;&gt;</div><div class="line">+-------------+</div><div class="line">|Hello, world.|</div><div class="line">|Hello, world.|</div><div class="line">|Hello, world.|</div><div class="line">|Hello, world.|</div><div class="line">|Hello, world.|</div><div class="line">+-------------+</div><div class="line">+-------------+</div><div class="line">|你好，世界|</div><div class="line">|你好，世界|</div><div class="line">|你好，世界|</div><div class="line">|你好，世界|</div><div class="line">|你好，世界|</div><div class="line">+-------------+</div></pre></td></tr></table></figure>
<h3 id="Template-Method-模式中的角色"><a href="#Template-Method-模式中的角色" class="headerlink" title="Template Method 模式中的角色"></a>Template Method 模式中的角色</h3><p>在Template Method模式中有以下登场角色。</p>
<h4 id="AbstractClass-抽象类"><a href="#AbstractClass-抽象类" class="headerlink" title="AbstractClass 抽象类"></a>AbstractClass 抽象类</h4><p>AbstractClass角色不仅负责实现模板方法，还负责声明模板方法中所使用到的抽象方法。这些抽象方法由子类ConcreteClass角色负责实现。在示例程序中，由AbstractClass类来扮演此角色。</p>
<h4 id="ConcreteClass-具体类"><a href="#ConcreteClass-具体类" class="headerlink" title="ConcreteClass 具体类"></a>ConcreteClass 具体类</h4><p>该角色负责具体实现AbstractClass角色中所定义的抽象方法。这里实现的方法将会在AbstractClass角色模板方法中被调用。在示例程序中，由CharDisplay类和StringDisplay类扮演此角色。</p>
<h5 id="Template-Method-模式的类图"><a href="#Template-Method-模式的类图" class="headerlink" title="Template Method 模式的类图"></a>Template Method 模式的类图</h5><p><img src="http://ogo6z0ylk.bkt.clouddn.com/pic5.png" alt=""></p>
<h3 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a>拓展</h3><h4 id="可以使逻辑处理通用化"><a href="#可以使逻辑处理通用化" class="headerlink" title="可以使逻辑处理通用化"></a>可以使逻辑处理通用化</h4><p>使用Template Method 模式的好处，由于在父类的模板方法中编写了算法，因此无需在每个子类中再编写算法。</p>
<h4 id="父类与子类之间的协作"><a href="#父类与子类之间的协作" class="headerlink" title="父类与子类之间的协作"></a>父类与子类之间的协作</h4><p>在Template Method 模式中，父类和子类是紧密联系、共同工作的。因此，在子类中实现了父类中声明的抽象方法时，必须要理解这些抽象方法被调用的时机。在看不到父类的源代码情况下，想要编写子类是非常困难的。</p>
<h4 id="父类与子类之间的一致性"><a href="#父类与子类之间的一致性" class="headerlink" title="父类与子类之间的一致性"></a>父类与子类之间的一致性</h4><p>在示例程序中，不论是CharDisplay的实例还是StringDisplay的实例，都是先保存再在AbstractDisplay类型的变量中，然后再调用display()方法的。</p>
<p>使用父类类型的变量保存子类实例的优点是，即使没有用instance of等指定子类的种类，程序也能正常工作。</p>
<h4 id="类的层次"><a href="#类的层次" class="headerlink" title="类的层次"></a>类的层次</h4><p>在理解类的层次时，通常是站在子类的角度进行思考的，也就是说，很容易着眼于以下几点，</p>
<p>a.在子类中可以使用父类中定义的方法</p>
<p>b.可以通过在子类中增加方法以实现新的功能</p>
<p>c.在子类中重写父类的方法可以改变程序的行为</p>
<p>现在，改变一下立场，<b>站在父类的角度进行思考。</b>在父类中，声明了抽象方法，而将该方法的实现交给了子类。换言之，就程序而言，声明抽象方法是希望达到以下目的。</p>
<p>a.期待子类去实现抽象方法</p>
<p>b.要求子类去实现抽象方法</p>
<p>也就是说，子类具有实现在父类中所声明的抽象方法的责任。这种责任，也被称为”子类责任”。</p>
<h4 id="抽象类的意义"><a href="#抽象类的意义" class="headerlink" title="抽象类的意义"></a>抽象类的意义</h4><p>对于抽象类，是无法生成其实例的。记得初学抽象类时，纠结于”无法生成实例的类有什么用”。由于在抽象方法中并没有编写具体的实现，所以无法知道在抽象方法中进行了什么处理。但是可以决定抽象方法的名字，然后通过调用使用了抽象方法的模板方法去编写处理。虽然具体处理内容是由子类决定的，不过，在抽象类阶段确定处理的流程非常重要。</p>
<h3 id="相关设计模式"><a href="#相关设计模式" class="headerlink" title="相关设计模式"></a>相关设计模式</h3><h4 id="Factory-Method-模式"><a href="#Factory-Method-模式" class="headerlink" title="Factory Method 模式"></a>Factory Method 模式</h4><p>Factory Method 模式是将Template Method 模式用于生成实例的一个典型栗子。</p>
<h4 id="Strategy-模式"><a href="#Strategy-模式" class="headerlink" title="Strategy 模式"></a>Strategy 模式</h4><p>在Tempalte Method 模式中，可以<b>使用继承改变程序行为。</b>。与Template Method 模式中改变部分程序行为不同的是，Strategy 模式用于替换整个算法。</p>
<h3 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q &amp; A"></a>Q &amp; A</h3><h4 id="1-在示例程序中的AbstractDisplay类中的display-方法使用了修饰符final，为了表达什么意思？"><a href="#1-在示例程序中的AbstractDisplay类中的display-方法使用了修饰符final，为了表达什么意思？" class="headerlink" title="1.在示例程序中的AbstractDisplay类中的display()方法使用了修饰符final，为了表达什么意思？"></a>1.在示例程序中的AbstractDisplay类中的display()方法使用了修饰符final，为了表达什么意思？</h4><p>这表示在子类中无法重写display方法。要求子类的编写者”如果想继承这个类，不要重写display方法，请编写其他方法”。</p>
<h4 id="2-Java中接口与抽象类类似。可以使用接口来扮演AbstractClass角色么？"><a href="#2-Java中接口与抽象类类似。可以使用接口来扮演AbstractClass角色么？" class="headerlink" title="2.Java中接口与抽象类类似。可以使用接口来扮演AbstractClass角色么？"></a>2.Java中接口与抽象类类似。可以使用接口来扮演AbstractClass角色么？</h4><p>因为Template Method 模式中的AbstractClass角色必须实现处理的流程。在抽象类中可以实现一部分方法，但是接口是无法实现方法的。所以，在Template Method 模式中无法用接口替代抽象类。</p>
<hr>
<hr>
<p><b><i>Factory Method 模式:将实例的生成交给子类;</i></b></p>
<h2 id="Factory-Method-模式-1"><a href="#Factory-Method-模式-1" class="headerlink" title="Factory Method 模式"></a>Factory Method 模式</h2><p>在Template Method 模式中，在父类中规定处理的流程，在子类中实现具体的处理。如果，将该模式用于生成实例，它就演变成本章所述的Factory Method 模式。</p>
<p>Factory 有”工厂”的意思。用Template Method 模式来构建生成实例的工厂，这就是Factory Method 模式。</p>
<p>在Factory Method 模式中，父类决定实例的生成方式，但并不决定索要生成的具体的类，具体的处理全部交由子类负责。这也就可以将生成实例的框架(framework)和时机负责生成实例的类解耦。</p>
<h3 id="示例程序-1"><a href="#示例程序-1" class="headerlink" title="示例程序"></a>示例程序</h3><p>这里示例程序的作用是制作身份证ID卡，其中有5个类。</p>
<p>Product类和Factory类属于framework包。这俩个类组成了生成实例的框架。<br>IDCard类和IDCardFactory类负责时机的加工处理，属于idcard包。<br>Main类由于测试程序行为的类。</p>
<p>注意类所属的包。</p>
<p><b>· 生成实例的框架(framework包)</b></p>
<p><b>· 加工处理(idcard包)</b></p>
<h4 id="类的一览表-1"><a href="#类的一览表-1" class="headerlink" title="类的一览表"></a>类的一览表</h4><p><img src="http://ogo6z0ylk.bkt.clouddn.com/121501.png" alt=""></p>
<h4 id="示例程序的类图-1"><a href="#示例程序的类图-1" class="headerlink" title="示例程序的类图"></a>示例程序的类图</h4><p><img src="http://ogo6z0ylk.bkt.clouddn.com/121502.png" alt=""></p>
<h4 id="Product类"><a href="#Product类" class="headerlink" title="Product类"></a>Product类</h4><p>framework包中的Product类是用来表示产品的。在该类中仅声明了use抽象方法。use方法的实现则被交给了Product类的子类负责。</p>
<p>在这个框架中，<i>定义了产品是”任意的可以use的”东西。</i></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">use</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Factory类"><a href="#Factory类" class="headerlink" title="Factory类"></a>Factory类</h4><p>在framework包中的Factory类中，使用了Template Method 模式。该类还声明了用于”生成产品”的createProduct抽象方法和用于”注册产品”的registerProduct抽象方法。”生成产品”和”注册产品”的具体处理则被交给了Factory类的子类负责。</p>
<p>在这个框架中，定义了工厂是用来”调用create方法生成Product实例”的。而create方法的实现是先调用createProduct生成产品，接着调用registerProduct注册残片。</p>
<p>具体的实现内容根据Factory Method 模式使用的场景不同而不同。但是，只要是Factory Method 模式，在生成实例时就一定会使用到Template Method 模式。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Factory</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">final</span> Product <span class="title">create</span><span class="params">(String owner)</span></span>&#123;</div><div class="line">		Product p = createProduct(owner);</div><div class="line">		registerProduct(p);</div><div class="line">		<span class="keyword">return</span> p;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> Product <span class="title">createProduct</span><span class="params">(String owner)</span></span>;</div><div class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">registerProduct</span><span class="params">(Product product)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="IDCard类"><a href="#IDCard类" class="headerlink" title="IDCard类"></a>IDCard类</h4><p>上面已经了解框架(framework包)的代码。接下来关注点转移到负责加工处理的idcard包。编写表示ID卡的类，即IDCard类。为了能够明显体现出与框架的分离，将这个类放在idcard包中。IDCard类是产品Product类的子类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IDCard</span> <span class="keyword">extends</span> <span class="title">Product</span></span>&#123;</div><div class="line">	<span class="keyword">private</span> String owner;</div><div class="line">	IDCard(String owner)&#123;</div><div class="line">		System.out.println(<span class="string">"制作"</span>+ owner +<span class="string">"的ID卡"</span>);</div><div class="line">		<span class="keyword">this</span>.owner = owner;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">use</span><span class="params">()</span></span>&#123;</div><div class="line">		System.out.println(<span class="string">"使用"</span>+ owner +<span class="string">"的ID卡"</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getOwner</span><span class="params">()</span></span>&#123;</div><div class="line">		retrun owner;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="IDCardFactory类"><a href="#IDCardFactory类" class="headerlink" title="IDCardFactory类"></a>IDCardFactory类</h4><p>IDCardFactory类实现了createProduct方法和registerProduct方法。</p>
<p>createProduct方法通过生成IDCard的实例来”生成产品”。</p>
<p>registerProduct方法则通过将IDCard的owner(持有人)保存到owners字段中来实现”注册产品”。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IDCardFactory</span> <span class="keyword">extends</span> <span class="title">Factory</span></span>&#123;</div><div class="line">	<span class="keyword">private</span> List owners = <span class="keyword">new</span> ArrayList();</div><div class="line">	<span class="function"><span class="keyword">protected</span> Product <span class="title">createProduct</span><span class="params">(Stirng owner)</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> IDCard(owner);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">registerProduct</span><span class="params">(Product product)</span></span>&#123;</div><div class="line">		owners.add(((IDCard)product).getOwner());</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> List <span class="title">getOwners</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> owners;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Main类"><a href="#Main类" class="headerlink" title="Main类"></a>Main类</h4><p>程序行为测试类，使用framework包和idcard包来制作和使用IDCard。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">		Factory factory = <span class="keyword">new</span> IDCardFactory();</div><div class="line">		Product card1 = factory.create(<span class="string">"小红"</span>);</div><div class="line">		Product card2 = factory.create(<span class="string">"小明"</span>);</div><div class="line">		Product card3 = factory.create(<span class="string">"小刚"</span>);</div><div class="line">		card1.use();</div><div class="line">		card2.use();</div><div class="line">		card3.use();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行结果如下。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">制作小红的ID卡。</div><div class="line">制作小明的ID卡。</div><div class="line">制作小刚的ID卡。</div><div class="line">使用小红的ID卡。</div><div class="line">使用小明的ID卡。</div><div class="line">使用小刚的ID卡。</div></pre></td></tr></table></figure>
<h3 id="Factory-Method-模式中的角色"><a href="#Factory-Method-模式中的角色" class="headerlink" title="Factory Method 模式中的角色"></a>Factory Method 模式中的角色</h3><p>在Factory Method 模式中有以下登场角色。通过查看类图，可以知道父类(框架)这一方的Creator角色和Product角色的关系与子类(具体加工)这一方的ConcreteCreator角色和ConcreteProduct角色的关系是<b>平行的。</b></p>
<h4 id="Factory-Method-模式的类图"><a href="#Factory-Method-模式的类图" class="headerlink" title="Factory Method 模式的类图"></a>Factory Method 模式的类图</h4><p><img src="http://ogo6z0ylk.bkt.clouddn.com/121503.png" alt=""></p>
<h4 id="Product-产品"><a href="#Product-产品" class="headerlink" title="Product 产品"></a>Product 产品</h4><p>Product角色属于框架这一方，是一个<i>抽象类。</i>它定义了在Factory Method 模式中生成的那些实例所持有的接口，但具体的处理则由子类ConcreteProduct角色决定。在示例程序中，由Product类扮演此角色。</p>
<h4 id="Creator-创建者"><a href="#Creator-创建者" class="headerlink" title="Creator 创建者"></a>Creator 创建者</h4><p>Creator角色处于框架这一方，它是负责生成Product角色的<i>抽象类</i>，但具体的处理则由子类ConcreteCreator角色决定。在示例程序中，由Factory类扮演此角色。</p>
<p>Creator角色对于实际负责生成实例的ConcreteCreator角色一无所知，它唯一知道的就是只要调用Product角色和生成实例的方法(factoryMethod方法)，就可以生成Product实例。<b>不用new关键字来生成实例，而是调用生成实例的专用方法来生成实例，这样就可以放置父类和其他具体类耦合。</b></p>
<h4 id="ConcreteProduct-具体的产品"><a href="#ConcreteProduct-具体的产品" class="headerlink" title="ConcreteProduct 具体的产品"></a>ConcreteProduct 具体的产品</h4><p>ConcreteProduct角色属于具体加工这一方，它决定了具体的产品。在示例程序中，由IDCard类扮演此角色。</p>
<h4 id="ConcreteCreator-具体的创建者"><a href="#ConcreteCreator-具体的创建者" class="headerlink" title="ConcreteCreator 具体的创建者"></a>ConcreteCreator 具体的创建者</h4><p>ConcreteCreator角色属于具体加工这一方，它负责生成具体的产品。在示例程序中，由IDCardFactory类扮演此角色。</p>
<h3 id="拓展-1"><a href="#拓展-1" class="headerlink" title="拓展"></a>拓展</h3><h4 id="框架与具体加工"><a href="#框架与具体加工" class="headerlink" title="框架与具体加工"></a>框架与具体加工</h4><p>分别学习了”框架”与”具体加工”俩方面的内容，他们分别封装在framework包和idcard包中。</p>
<p>这里，可以用相同的框架创建其他的”产品”和”工厂”。例如，这次要创建表示电视机的类Televison和表示电视机工厂的类TevevisonFactory。这时，只需要引入framework包就可以编写televison包。</p>
<p>注意，没有修改，也没有必要修改framework包中的任何内容，就可以创建出其他的”产品”和”工厂”。</p>
<p>在framework包中并没有引入idcard包。在Product类和Factory类中，并没有出现IDCard和IDCardFactory等具体类的名字。因此，即使用已有的框架生成全新的类时，也完全不需要对framework进行修改。</p>
<h4 id="生成实例，方法的三种实现方式"><a href="#生成实例，方法的三种实现方式" class="headerlink" title="生成实例，方法的三种实现方式"></a>生成实例，方法的三种实现方式</h4><p>在示例程序中，Factory类的createProduct方法是抽象方法，也就是说需要在子类中实现该方法。createProduct方法的实现方式一般有一下三种。</p>
<h5 id="1-指定其为抽象方法"><a href="#1-指定其为抽象方法" class="headerlink" title="1.指定其为抽象方法"></a>1.指定其为抽象方法</h5><p>指定其为抽象方法。一旦将createProduct指定为抽象方法后，子类就必须实现该方法。如果子类不实现该方法，编译器将会报告编译错误，这也是示例程序所采用的方式。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Factory</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Product <span class="title">createProduct</span><span class="params">(String name)</span></span>;</div><div class="line">	...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="2-为其实现默认处理"><a href="#2-为其实现默认处理" class="headerlink" title="2.为其实现默认处理"></a>2.为其实现默认处理</h5><p>为其实现默认处理。实现默认处理后，如果子类没有实现该方法，将进行默认处理。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Factory</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> Product <span class="title">createProduct</span><span class="params">(String name)</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> Product(name);</div><div class="line">	&#125;</div><div class="line">	...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>不过，这时是使用new关键字创建出实例的，因此不能将Product定义为抽象类。</p>
<h5 id="3-在其中抛出异常"><a href="#3-在其中抛出异常" class="headerlink" title="3.在其中抛出异常"></a>3.在其中抛出异常</h5><p>在其中抛出异常的方法。createProduct方法的默认处理为抛出异常，这样依赖，如果未在子类中实现该方法，程序就会在运行时出错(报错，告知开发人员没有实现createProduct方法)。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Factory</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> Product <span class="title">createProduct</span><span class="params">(String name)</span></span>&#123;</div><div class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> FactoryMethodRuntimeExceprion();</div><div class="line">	&#125;</div><div class="line">	...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>不过，这需要另外编写FactoryMethodRuntimeException异常类。</p>
<h3 id="相关设计模式-1"><a href="#相关设计模式-1" class="headerlink" title="相关设计模式"></a>相关设计模式</h3><h4 id="Template-Mehtod-模式"><a href="#Template-Mehtod-模式" class="headerlink" title="Template Mehtod 模式"></a>Template Mehtod 模式</h4><p>Factory Method 模式就是Template Method 模式的典型应用。在示例程序中，create方法就是模板方法。</p>
<h4 id="Singleton-模式"><a href="#Singleton-模式" class="headerlink" title="Singleton 模式"></a>Singleton 模式</h4><p>在多数情况下，都可以将Singleton 模式用于扮演Creator角色(或者ConcreteCreator角色)的类。这是因为在程序中没有必要存在多个Creator角色(或者ConcreteCreator角色)的实例。不过在示例程序中没有使用Singleton 模式。</p>
<h4 id="Composite-模式"><a href="#Composite-模式" class="headerlink" title="Composite 模式"></a>Composite 模式</h4><p>有时可以将Composite 模式用于Product角色(或者ConcreteProduct角色)。</p>

      
    </div>

    <div>
      
        
      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Template-Method模式/" rel="tag">#Template Method模式</a>
          
            <a href="/tags/Factory-Method模式/" rel="tag">#Factory Method模式</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/07/02/part-1-适应设计模式/" rel="next" title="part 1 - 适应设计模式[Iterator & Adapter]">
                <i class="fa fa-chevron-left"></i> part 1 - 适应设计模式[Iterator & Adapter]
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/07/26/part-3-生成实例/" rel="prev" title="part 3 - 生成实例[Singleton & Prototype]">
                part 3 - 生成实例[Singleton & Prototype] <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>

          
  <div class="comments" id="comments">
    
  </div>
  <!-- 来必力City版安装代码 -->
<div id="lv-container" data-id="city" data-uid="MTAyMC8zMTcxMS84Mjc1">
  <script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
  </script>
<noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
</div>
<!-- City版安装代码已完成 -->


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/ava.png"
               alt="拾叁妖" />
          <p class="site-author-name" itemprop="name">拾叁妖</p>
          <p class="site-description motion-element" itemprop="description">奇变偶不变，符号看象限。</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">27</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">33</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/Altman29" target="_blank" title="github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/5866547818/profile?rightmod=1&wvr=6&mod=personinfo&is_all=1" target="_blank" title="weibo">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Template-Method-模式"><span class="nav-number">1.</span> <span class="nav-text">Template Method 模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例程序"><span class="nav-number">1.1.</span> <span class="nav-text">示例程序</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#类的一览表"><span class="nav-number">1.1.1.</span> <span class="nav-text">类的一览表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#示例程序的类图"><span class="nav-number">1.1.2.</span> <span class="nav-text">示例程序的类图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AbstractDisplay-类"><span class="nav-number">1.1.3.</span> <span class="nav-text">AbstractDisplay 类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CharDisplay-类"><span class="nav-number">1.1.4.</span> <span class="nav-text">CharDisplay 类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#StringDisplay-类"><span class="nav-number">1.1.5.</span> <span class="nav-text">StringDisplay 类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Main-类"><span class="nav-number">1.1.6.</span> <span class="nav-text">Main 类</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Template-Method-模式中的角色"><span class="nav-number">1.2.</span> <span class="nav-text">Template Method 模式中的角色</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#AbstractClass-抽象类"><span class="nav-number">1.2.1.</span> <span class="nav-text">AbstractClass 抽象类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ConcreteClass-具体类"><span class="nav-number">1.2.2.</span> <span class="nav-text">ConcreteClass 具体类</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Template-Method-模式的类图"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">Template Method 模式的类图</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#拓展"><span class="nav-number">1.3.</span> <span class="nav-text">拓展</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#可以使逻辑处理通用化"><span class="nav-number">1.3.1.</span> <span class="nav-text">可以使逻辑处理通用化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#父类与子类之间的协作"><span class="nav-number">1.3.2.</span> <span class="nav-text">父类与子类之间的协作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#父类与子类之间的一致性"><span class="nav-number">1.3.3.</span> <span class="nav-text">父类与子类之间的一致性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#类的层次"><span class="nav-number">1.3.4.</span> <span class="nav-text">类的层次</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#抽象类的意义"><span class="nav-number">1.3.5.</span> <span class="nav-text">抽象类的意义</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#相关设计模式"><span class="nav-number">1.4.</span> <span class="nav-text">相关设计模式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Factory-Method-模式"><span class="nav-number">1.4.1.</span> <span class="nav-text">Factory Method 模式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Strategy-模式"><span class="nav-number">1.4.2.</span> <span class="nav-text">Strategy 模式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Q-amp-A"><span class="nav-number">1.5.</span> <span class="nav-text">Q & A</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-在示例程序中的AbstractDisplay类中的display-方法使用了修饰符final，为了表达什么意思？"><span class="nav-number">1.5.1.</span> <span class="nav-text">1.在示例程序中的AbstractDisplay类中的display()方法使用了修饰符final，为了表达什么意思？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Java中接口与抽象类类似。可以使用接口来扮演AbstractClass角色么？"><span class="nav-number">1.5.2.</span> <span class="nav-text">2.Java中接口与抽象类类似。可以使用接口来扮演AbstractClass角色么？</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Factory-Method-模式-1"><span class="nav-number">2.</span> <span class="nav-text">Factory Method 模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#示例程序-1"><span class="nav-number">2.1.</span> <span class="nav-text">示例程序</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#类的一览表-1"><span class="nav-number">2.1.1.</span> <span class="nav-text">类的一览表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#示例程序的类图-1"><span class="nav-number">2.1.2.</span> <span class="nav-text">示例程序的类图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Product类"><span class="nav-number">2.1.3.</span> <span class="nav-text">Product类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Factory类"><span class="nav-number">2.1.4.</span> <span class="nav-text">Factory类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IDCard类"><span class="nav-number">2.1.5.</span> <span class="nav-text">IDCard类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IDCardFactory类"><span class="nav-number">2.1.6.</span> <span class="nav-text">IDCardFactory类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Main类"><span class="nav-number">2.1.7.</span> <span class="nav-text">Main类</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Factory-Method-模式中的角色"><span class="nav-number">2.2.</span> <span class="nav-text">Factory Method 模式中的角色</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Factory-Method-模式的类图"><span class="nav-number">2.2.1.</span> <span class="nav-text">Factory Method 模式的类图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Product-产品"><span class="nav-number">2.2.2.</span> <span class="nav-text">Product 产品</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Creator-创建者"><span class="nav-number">2.2.3.</span> <span class="nav-text">Creator 创建者</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ConcreteProduct-具体的产品"><span class="nav-number">2.2.4.</span> <span class="nav-text">ConcreteProduct 具体的产品</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ConcreteCreator-具体的创建者"><span class="nav-number">2.2.5.</span> <span class="nav-text">ConcreteCreator 具体的创建者</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#拓展-1"><span class="nav-number">2.3.</span> <span class="nav-text">拓展</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#框架与具体加工"><span class="nav-number">2.3.1.</span> <span class="nav-text">框架与具体加工</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#生成实例，方法的三种实现方式"><span class="nav-number">2.3.2.</span> <span class="nav-text">生成实例，方法的三种实现方式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-指定其为抽象方法"><span class="nav-number">2.3.2.1.</span> <span class="nav-text">1.指定其为抽象方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-为其实现默认处理"><span class="nav-number">2.3.2.2.</span> <span class="nav-text">2.为其实现默认处理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-在其中抛出异常"><span class="nav-number">2.3.2.3.</span> <span class="nav-text">3.在其中抛出异常</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#相关设计模式-1"><span class="nav-number">2.4.</span> <span class="nav-text">相关设计模式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Template-Mehtod-模式"><span class="nav-number">2.4.1.</span> <span class="nav-text">Template Mehtod 模式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Singleton-模式"><span class="nav-number">2.4.2.</span> <span class="nav-text">Singleton 模式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Composite-模式"><span class="nav-number">2.4.3.</span> <span class="nav-text">Composite 模式</span></a></li></ol></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >

  <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">拾叁妖</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
  &nbsp;丨&nbsp;
  <!-- 不蒜统计 -->
  <span style="display: inline;" id="busuanzi_container_site_uv">本站总访客数 <span id="busuanzi_value_site_uv" font="微软雅黑"></span> 次</span>
  &nbsp;丨&nbsp;
  <span style="display: inline;" id="busuanzi_container_site_pv">本站总访问量 <span id="busuanzi_value_site_pv" font="微软雅黑"></span> 次</span>
</div>




        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  



  
  
  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("nfQNU5dFwiltiHNWVEeJeuFp-gzGzoHsz", "oANzCtO0CzmnL1JmWkHda5Dp");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

</body>
</html>
